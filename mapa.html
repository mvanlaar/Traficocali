<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width initial-scale=1.0" />
	<title>Mapa</title>

	<link rel="stylesheet" href="css/tema_mobile.css" />
	<link rel="stylesheet" href="css/jquery.mobile.structure-1.3.1.min.css" />

	<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
	<script type="text/javascript" src="js/jquery.mobile-1.3.1.js"></script>

	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"> </script>
	<script type="text/javascript">
		window.onload = function() {
			var options1 = {
				enableHighAccuracy : true,
				maximumAge : 60000,
				timeout : 45000
			};
			var lantlong = {
				lat : "",
				lon : ""
			};
			if (window.navigator.geolocation) {
				navigator.geolocation.getCurrentPosition(exito, falla,options1);
				//getCurrentPosition
			} else {
				alert("tu broswer no soporta geolocation");
				return;
			}
			function exito(cordenadas) {
				var lat = cordenadas.coords.latitude;
				var lon = cordenadas.coords.longitude;
				lantlong.lat = lat;
				lantlong.lon = lon;
				cambio();
			}

			function falla() {
				// do algo
			}
			function cambio() {
				//var tmp = document.getElementById("geo").innerHTML="Latitud:"+lantlong.lat+"<br/>"+"longitud:"+lantlong.lon;
				var mapDiv=document.getElementById("map");
				var latlng=new google.maps.LatLng( lantlong.lat, lantlong.lon);
				var options={
					center:latlng,
					zoom:15,
					mapTypeId: google.maps.MapTypeId.ROADMAP
				};
				var map=new google.maps.Map(mapDiv,options);
				// Creamos un marcador y lo posicionamos en el mapa
				var marcador = new google.maps.Marker({
				  position: new google.maps.LatLng(lantlong.lat, lantlong.lon),
				  map: map
				});
			}
		}
	</script>
</head>
<body>
	<!-- PAGINA MAPA -->
	<div data-role="page" id="mapa">
		<div data-role="header" data-position="fixed">
			<h1>Mapa</h1>
				<a href="index.html" data-role="button" data-icon="arrow-l" data-corners="false">Atras</a>
		</div>

		<div data-role="content">
			<div id="map" style="width: 100%; height: 300px;"></div>
		</div>

		<div data-role="footer" data-position="fixed">
			<h2>Derechos reservados</h2>
		</div>
	</div>
</body>
</html>